---
title: "Luc's Wedding Website üíç"
publishedAt: '2023-11-21'
summary: 'Unfortunately I''m still single but... at least now I have my own wedding website!'
---

## Overview

Big news... I created my own personal [wedding website üòç](https://wedding-website-lymarrie.vercel.app/)! Here it is below, in all its glory:

![Website - Home Page](https://res.cloudinary.com/dtgeenuny/image/upload/v1700954580/Wedding%20Website.png)

It comes equipped with the following pages:
- [Home](https://wedding-website-lymarrie.vercel.app/)
- [Wedding Weekend](https://wedding-website-lymarrie.vercel.app/wedding-weekend) (weekend itinerary)
- [TBD and Luc](https://wedding-website-lymarrie.vercel.app/tbd-and-luc) (the story of how my non-existent wife and I met)
- [FAQs](https://wedding-website-lymarrie.vercel.app/faqs)
- [Travel](https://wedding-website-lymarrie.vercel.app/travel) (travel guidance)
- [Accomodations](https://wedding-website-lymarrie.vercel.app/accomodations)
- [RSVP](https://wedding-website-lymarrie.vercel.app/rsvp)

### The RSVP Page üíå

The [RSVP page](https://wedding-website-lymarrie.vercel.app/rsvp), in particular, is where most of the magic happens ‚ú®. You can search for an RSVP for any of the following guests below:

<div>
    <div className="flex flex-col md:grid md:grid-cols-3 md:gap-x-3">
        <div className="flex md:col-span-1">
            | First Name | Last Name |
            | ---- | ---- |
            | John | Doe |
            | Jane | Smith |
            | Barack | Obama |
            | Chuck | Norris |
            | Luc | Marrie |
        </div>
        <div className="col-span-2">
            ![Website - Find Invite](https://res.cloudinary.com/dtgeenuny/image/upload/v1700970996/rsvp-find-invite.png)
        </div>
    </div>
</div>


### Project Goals

Initially when I started this project, I wanted to continue exploring [Next.js](https://nextjs.org/) (a [React](https://react.dev/)-based framework for building UIs) and to get my hands dirty with some kind of [database](https://www.oracle.com/database/what-is-database/)... even if for a very lightweight use case.

To date, all websites I had built thus far:

1. Were fully **static** in nature (page content is already set in stone)
2. Or, when **dynamic** data is requied, relied on simple `GET` calls to previously-existing APIs

As such, I wanted to pick a simple website use case that would require me to create my own database.

### So... Why a Wedding Website?

You may have noticed the title of my website is "TBD and Luc". That's because I'm not actually getting married... (nor do I have a gf/fianc√©e lol).

I'm still a single man, traversing life's winding roads in solitude. However, I fret not because surely my unwavering pursuit of web dev knowledge will lead me to true love.

![Single man halfgif](https://media.giphy.com/media/H6cmWzp6LGFvqjidB7/giphy.gif)

Anyway, prior to the üçÇ fall of 2023, I had yet to attend my first wedding. When it rains, it pours I guess... because suddenly three back-to-back weddings popped up on my calendar üò®.

In terms of the wedding sites, they were created by the following service providers:
1. [Zola](https://www.zola.com/)
2. [The Knot](https://www.theknot.com/)
3. [Wix](https://www.wix.com/)

Given that I literally help companies make websites for a living, it was interesting to examines websites for a totally different use case from my line of work... and to inspect the visual layout and feature differences between each provider.

In terms of similarities, features included:
- Several pages of **static** content (FAQs, photos, "how we met", etc.)
- Usually a **registry**
- In all cases, an **RSVP** page (where a user provides some sort of unique identifier, granting them read/write access to their RSVP info)

In any case, based on the described functionality, I decided a wedding website was a perfect use case for my project.

![Chef's Kiss halfgif](https://media.giphy.com/media/3q3QK6KyDVUBzih7hB/giphy.gif)


## Website Development

Alright, now for the meat and potatoes ü•© ü•î... how was this thing made?

### Features

For an [MVP](https://www.productplan.com/glossary/minimum-viable-product/), I decided to prioritize the following features:

| Feature | Description | MVP |
| ---- | ---- | ----------- |
| Static Pages | Pages with static content (e.g. home, wedding schedule, FAQs, etc.). | ‚úÖ |
| RSVP (Read) | Let's user check on the status of their RSVP using first/last name. | ‚úÖ |
| RSVP (Write) | Let's user submit/update their RSVP information. | ‚ùå |
| Registry | Registry page for that new Espresso machine I've had my eyes on. Doing this from scratch would require me to either build an e-commerce site essentially... so, I'm gonna pass for now. If I were to seriously pursue this, I'd probably use a URL 200 rewrite (or `iframe`) to a page hosted on Zola/The Knot.  | ‚ùå |
| Site Password Protection | Secure site with basic password protection. I will revisit this in the near future. | ‚ùå |

### Architecture

To support the above feature set, I loosely adhered to this tacky architecture diagram:

![Website Architeture](https://res.cloudinary.com/dtgeenuny/image/upload/v1700973579/wedding-site-architecture.png)


### Tech Stack

- [Next.js](https://nextjs.org/) (Front-end)
- [Vercel](https://vercel.com/) (Hosting + serverless functions)
- [Vercel Postgres](https://vercel.com/storage/postgres) (Backend database for all my lovely guests and their RSVPs)
- [TailwindCSS](https://tailwindcss.com/) (Styling)

### Building the Static Pages

To kick things off, I scaffolded my project and created a blank canvas for each page using Next.js's [quickstart flow](https://nextjs.org/docs/getting-started/installation), which now uses [App Router](https://nextjs.org/docs/app) by default (as opposed to [Pages Router](https://nextjs.org/docs/pages)).

```zsh
npx create-next-app@latest
```

Note that because I'm new to Next.js, everything described below is written exclusively with knowledge of app router only.

#### Pages

In Next.js, each folder is used to define a "route" (path at which a page is available in the browser). Creating a `page` file under each route is what makes the UI at that path publicly accessible. As such, I was able to create each page of my site using the directory structure below:

```zsh 
app
‚îú‚îÄ‚îÄ accomodations   <-- defines URL
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx    <-- UI defined here is exposed at folder name
‚îú‚îÄ‚îÄ faqs
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îú‚îÄ‚îÄ rsvp
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îú‚îÄ‚îÄ tbd-and-luc
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îú‚îÄ‚îÄ travel
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îú‚îÄ‚îÄ wedding-weekend
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îú‚îÄ‚îÄ globals.css
‚îú‚îÄ‚îÄ layout.tsx        <-- automatically shared layout
‚îî‚îÄ‚îÄ page.tsx          <-- home page
```

#### Shared Layout

In Next.js projects, `layout` is a special file. As Next.js defines it:

> A layout is UI that is shared between multiple pages. On navigation, layouts preserve state, remain interactive, and do not re-render. 

Honestly, it's unclear to me if this is a <strong>React</strong> feature or a <strong>Next.js</strong> feature (or <em>both</em>... since Next.js is React cloaked in robot armor). Regardless, this is great because each page in my app will have the same structure... so there's no need to re-render a fresh layout each time a page loads.

When a layout is defined at the `app/` root, it's known as the [Root Layout](https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts#root-layout-required). This is basically a "global" layout; Next.js applies it to all pages in the app automatically.

I tossed a `Navbar` and `Footer` component into that bad boy straight away:

```tsx
import Navbar from './components/navbar'
import Footer from './components/footer'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body className="">
        <Navbar />     <-- üòâ
        {children}
        <Footer />     <-- üòâ
      </body>
    </html>
  )
}
```

Beyond that, the rest of my initial work was just plain old React development (components, styling, etc.).

### The RSVP Page and Database

Next was the RSVP page. Here's how I decided it should work:
1. A guest can enter their first/last name on the page
2. If the guest exists in my database, return their RSVP information (i.e. the events they're currently RSVPed to)
3. If the guest doesn't exist, display an error

Ladies and gentlemen... **enter the database**:

![database normalgif](https://media.giphy.com/media/pOEbLRT4SwD35IELiQ/giphy.gif)

#### Picking a Database

For this segment of the project, I had two important questions to answer:
1. What ***type of database*** should I use?  ü§î (e.g. relational, NoSQL, key-value store, graph... etc.)
2. And from ***which database provider***? üò®

I've played around with [Supabase](https://supabase.com/) before, which was a great experience. Unfortunately they "pause" your DBs after a rather short period of inactivity... so I skipped out on them for now. (I will probably use them for my next project though).

Before I got much further in my search, I came across [Vercel's Storage product](https://vercel.com/docs/storage); front-and-center on their website:
>Vercel offers a suite of managed, serverless storage products that integrate with your frontend framework.<br />
> - **[Vercel KV](https://vercel.com/docs/storage/vercel-kv)**: Durable Redis<br />
> - **[Vercel Postgres](https://vercel.com/docs/storage/vercel-postgres)**: Serverless SQL<br />
> - **[Vercel Blob](https://vercel.com/docs/storage/vercel-blob)**: Large file storage<br />
> - **[Vercel Edge Config](https://vercel.com/docs/storage/edge-config)**: Global, low-latency data store<br />
> 

Given I was already using Next.js and Vercel, it was compelling to see they also had a storage product. But wait, it gets better... the product page had an entire paragraph dedicated to ***[CHOOSING a database type](https://vercel.com/docs/storage#choosing-a-storage-product)*** üò±:

>Choosing the correct storage solution depends on your needs for latency, durability, and consistency, among many other considerations.<br />
>
> To help you choose, we've created a table below to summarize the benefits of each storage option in relation to each other:

| Product | Reads | Writes | Use Case | Limits |
| ---- | ---- | ---- | ------- | ---- |
| [KV](https://vercel.com/docs/storage/vercel-kv) | Fast | Milliseconds | Key/value and JSON data | [Learn more](https://vercel.com/docs/storage/vercel-kv/limits) |
| [Postgres](https://vercel.com/docs/storage/vercel-postgres) | Fast | Milliseconds | Structured, relational data | [Learn more](https://vercel.com/docs/storage/vercel-postgres/limits) |
| [Blob](https://vercel.com/docs/storage/vercel-blob) | Fast | Milliseconds | Large, content-addressable files ("blobs") | [Learn more](https://vercel.com/docs/storage/vercel-blob/usage-and-pricing) |
| [Edge Config](https://vercel.com/docs/storage/edge-config) | Ultra-fast | Milliseconds | Runtime configuration (e.g., feature flags) | [Learn more](https://vercel.com/docs/storage/edge-config/edge-config-limits) |

After a literal 5-second skim of the table, the obvious way to go was [Postgres](https://vercel.com/docs/storage#vercel-postgres) (thank you Vercel for your pristine documentation).

#### Creating the Database

First, I needed to create a database in the Vercel platform. To do so, I leveraged their (somewhat bare bones) UI for running queries:

![Vercel Query - Create Tables](https://res.cloudinary.com/dtgeenuny/image/upload/v1701029990/vercel-create-tables_trxkl5.png)

Because I'm a spineless caterpillar, I asked [ChatGPT](https://chat.openai.com/auth/login) to construct me a relational table schema for guests, events, and RSVPs ü•¥. Based on its response, I created the following tables below:

```sql
CREATE TABLE guests (
  id SERIAL PRIMARY KEY,
  first_name VARCHAR(255),
  last_name VARCHAR(255),
  email VARCHAR(255),
  num_of_guests INT,
  rsvp_message VARCHAR(255)
);

CREATE TABLE events (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255),
  description TEXT,
  datetime TIMESTAMP WITH TIME ZONE,
  location VARCHAR(255)
);

CREATE TABLE rsvps (
  id SERIAL PRIMARY KEY,
  guest_id INT REFERENCES guests(id),
  event_id INT REFERENCES events(id),
  response BOOLEAN
);
```

I inserted some `guest`, `event`, and `rsvp` records:

```sql
INSERT INTO guests (first_name, last_name, email, num_of_guests, rsvp_message)
VALUES
  ('Luc', 'Marrie', 'luc@marrie.com', 2, 'I''m getting married?'), -- Guest 1
  ('John', 'Doe', 'john.doe@example.com', 2, 'So excited!'), -- Guest 2
  ('Jane', 'Smith', 'jane.smith@example.com', 2, 'Congrats!') -- Guest 3
;

INSERT INTO events (name, description, datetime, location)
VALUES
  ('Welcome Dinner', null, '2030-09-20 17:00:00', null), -- Event 1
  ('Wedding', null, '2030-09-21 16:30:00', null), -- Event 2
  ('Farewell Brunch', null, '2030-09-22 10:00:00', null) -- Event 3
;

INSERT INTO rsvps (guest_id, event_id, response)
VALUES
  (1, 1, true),  -- Luc Marrie RSVPs yes to Welcome Dinner
  (1, 2, true),  -- Luc Marrie RSVPs yes to Wedding
  (1, 3, true),  -- Luc Marrie RSVPs yes to Farewell Brunch
  (2, 1, true),  -- John Doe RSVPs yes to Welcome Dinner
  (2, 2, true),  -- John Doe RSVPs yes to Wedding
  (2, 3, false),  -- John Doe RSVPs no to Farewell Brunch
  (3, 1, false),  -- Jane Smith RSVPs no to Welcome Dinner
  (3, 2, false),  -- Jane Smith RSVPs yes to Wedding
  (3, 3, true)  -- Jane Smith RSVPs yes to Farewell Brunch
;
```

Voil√† - we were ready to go.

![Vercel Query - Select Guests](https://res.cloudinary.com/dtgeenuny/image/upload/v1701029990/vercel-insert-records_fgstlv.png)

#### Local Development

Now that the tables were set up, I could hook up the database to the frontend.

I used Vercel's Postgres [quickstart guide](https://vercel.com/docs/storage/vercel-postgres/quickstart) to get going. They weren't lying when they said "quick" start... considering how much of a noob I am, it was genuinely very easy for me to get started.

With a single command, I could fetch all necessary environment variables from Vercel and save them to a file called `.env.development.local`.:

```zsh
vercel env pull .env.development.local
```

From there, I could ***instantly*** interact with my database using a combination of their [SDK](https://vercel.com/docs/storage/vercel-postgres/sdk#sql) and serverless functions. Refer to the code block below, which shows a simple query against my `guests` table.

```typescript
// app/api/find-invitation/route.ts
import { sql } from '@vercel/postgres';
import { NextResponse } from 'next/server';
 
export async function GET(request: Request) {
  try {
    const result =
      await sql`SELECT * FROM guests;`;
    return NextResponse.json({ result }, { status: 200 });
  } catch (error) {
    return NextResponse.json({ error }, { status: 500 });
  }
}
```

Feel free to examine my finished serverless function in [GitHub](https://github.com/lymarrie/wedding-website/blob/main/app/api/find-invitation/route.ts). To summarize how it works:
1. When a guest clicks "Find Your Invitation", my app calls the serverless function with first/last name as query params:
```javascript
const response = await fetch(`/api/find-invitation?firstName=${firstName}&lastName=${lastName}`);
```
2. The function extracts the first/last name, and makes the following SQL query to find the guest `id`
```typescript
SELECT *
FROM guests
WHERE 
    first_name ILIKE ${firstName}
    AND last_name ILIKE ${lastName}
;
```
3. When a guest is found, the function queries the `events` table and joins it to the `rsvps` table based using the guest `id`
```sql
SELECT 
    events.id,
    events.name,
    events.description,
    events.datetime,
    events.location,
    rsvps.response
FROM events
LEFT JOIN rsvps 
ON 
    events.id = rsvps.event_id 
    AND rsvps.guest_id = ${guestId}
;
```

As such, the serverless function is able to return the following JSON back to my frontend: 
```json
{
    "guest": {
        "id": 2,
        "first_name": "John",
        "last_name": "Doe",
        "number_of_guests": 2,
        "rsvp_message": "My wife and I are so excited to see you get married... feels like just yesterday I taught you how to write serverless functions"
    },
    "rsvps": [
        {
            "id": 1,
            "name": "Welcome Dinner",
            "description": null,
            "datetime": "2030-09-20T17:00:00.000Z",
            "location": null,
            "response": true
        },
        {
            "id": 2,
            "name": "Wedding",
            "description": null,
            "datetime": "2030-09-21T16:30:00.000Z",
            "location": null,
            "response": true
        },
        {
            "id": 3,
            "name": "Farewell Brunch",
            "description": null,
            "datetime": "2030-09-22T10:00:00.000Z",
            "location": null,
            "response": true
        }
    ]
}
```

Which can then be easily leveraged in my TSX component, like so:

![John Doe RSVP](https://res.cloudinary.com/dtgeenuny/image/upload/v1701033539/john-doe-rsvp_aynrey.png)



### Production Deployment

When I created my Vercel Postgres database earlier, I had to connect it to a Vercel project (aka site).

Upon connection, Vercel automatically ensured all necessary Postgres environment variables were made available to website's `production`, `preview`, and `dev` environments:

![Vercel Database Project](https://res.cloudinary.com/dtgeenuny/image/upload/v1701033821/vercel-postgres-project_spgdzc.png)

## Closing Thoughts

I was extremely impressed with Vercel's developer experience... it genuinely was so easy getting a database stood up and hooked up to my application within minutes.

The only things I'm left wondering about are...
1. **Is there an easy way to protect a site behind a password using Next.js and Vercel?**
2. **Is it kind of odd that I'm using SQL directly via my serverless function, instead of some sort of API?** <br />
    
    I suppose, given the size of my site, I'm not aiming for blazing fast speed... However, I can see why this makes [Supabase](https://supabase.com/docs/guides/api) a compelling choice for develompent, as they auto-generate APIs for you right OOTB.

3. **Registrys...** <br />

    How the heck is that gonna work? I wonder if I could just create a registry using Zola or The Knot... and then hook that up to my site manually. If anyone knows, please shoot me a DM. Or, leave a comment... once I make it possible to leave comments on my blog posts üòâ

Thank you very much for reading, and I hope you enjoy the wedding website.

![Peace normalgif](https://media.giphy.com/media/Ru9sjtZ09XOEg/giphy.gif)